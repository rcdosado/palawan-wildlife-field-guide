{% extends "base.html" %} 
{% load thumbnail %}
{% load staticfiles %} 
{% block title %}{{ block.super }}Species{% endblock %} 
{% block navbar-left %} 
{% include "_navbar.html" with active_link="species" %} 
{% endblock %}

<!-- Benefits of the Django application -->
{% block container %}
<div id="searchpage" class="text-page2">
    <div class="container">
        <div class="row">
        </div>

        <div class="row">
            <div id="sidebarsection" class="col-sm-2">
                <div class="row"></div>
                <div class="row">
                    <nav id="cats" class="nav-sidebar">
                        <ul class="nav">
                            <li><a href="{% url "species:species-list" %}?q=">All</a></li>
                            {% for category in category_list %}
                                <li><a href="{% url "species:species-list" %}?q={{category.title}}">{{category.title}}</a></li>
                            {% endfor %}
                            <li class="nav-divider"></li>
                            <li><a href="#"><i class="glyphicon glyphicon-off"></i> Export</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
             
            <div id="searchsection" class="col-md-10 text-center">
            <div class="row">
                <div class="col-md-12 text-left" style="padding-left:6%;">
                 <h2><a href="{% url 'species:species-detail' specie_detail.pk %}">{{specie_detail.scientific_name |capfirst}},{{specie_detail.sciname_author}} </a></h2>
                 <h4>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</h4>
                 <hr>
                </div>
            </div>
<!-- Write your comments here 
                <form method='GET' action=''>
                <div class="row">
                    <div class="col-sm-12">
                        <h2>Search for Species</h2>
                        <p class="lead">searching leads to power</p>
                        <div class="input-group">
                            <div class="input-group-btn search-panel">
                                <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                                    <span id="search_concept">Filter by</span> <span class="caret"></span>
                                </button>
                                <ul class="dropdown-menu" role="menu">
                                    <li><a href="#contains">Contains</a></li>
                                    <li><a href="#its_equal">It's equal</a></li>
                                    <li><a href="#greather_than">Greather than &gt;</a></li>
                                    <li><a href="#less_than">Less than &lt; </a></li>
                                    <li class="divider"></li>
                                    <li><a href="#all">Anything</a></li>
                                </ul>
                            </div>
                            <input type="hidden" name="search_param" value="all" id="search_param">
                            <input type="text" class="form-control" value="{{request.GET.q}}" name="q" placeholder="Search term...">
                            <span class="input-group-btn">
                            <button class="btn btn-default" type="submit"><span class="glyphicon glyphicon-search"></span></button>
                            </span>
                        </div>
                    </div>
                </div>
                </form>
-->
                <div id="displayspec" class="row">
                    <div class="row">                    
                        <div class="col-md-4">
                        {% if image_urls %}
                            {% for i in image_urls %}
                                <img class="img-fluid" src="{{ i }}" style="width:80%;padding-top:5%;">
                            {% endfor %}
                        {% else %}
                                <img class="img-fluid" src="{{MEDIA_URL}}blank.png" style="width:100%;padding-top:5%;">
                        {% endif %}

                        </div>
                        <div class="col-md-8 text-left">

                            <div class="container-fluid">
                            <h3 style="margin-top:0px;"><strong>Taxonomical Information</strong></h3>
                                <strong>Kingdom : </strong><i>{{specie_detail.kingdom}}</i>
                                <br>
                                <strong>Phylum : </strong><i>{{specie_detail.phylum}}</i>
                                <br>
                                <strong>Class : </strong><i>{{specie_detail.classname}}</i>
                                <br>
                                <strong>Order : </strong><i>{{specie_detail.order}}</i>
                                <br>
                                <strong>Family : </strong><i>{{specie_detail.family}}</i>
                                <br>
                                <strong>Genus : </strong><i>{{specie_detail.genus}}</i>
                                <br>
                                <strong>Species Name : </strong><i>{{specie_detail.specie}}</i>
                                <br>
                                <strong>Scientific Name Author : </strong><i>{{specie_detail.sciname_author}}</i>
                                <br>
                                <strong>Slug : </strong><i>{{specie_detail.slug}}</i>
                                <br>
                                <strong>Basis of Record : </strong><i>{{specie_detail.basis_of_record}}</i>
                                <br>
                                <strong>Taxonomic Notes : </strong>
                                <br>                            
                                <strong>Discovered by : </strong><i>{{specie_detail.sciname_author}}</i>
                                <br>
                                <strong>Genus : </strong><i>{{specie_detail.genus}}</i>
                                <br>
                                <strong>Species Name : </strong><i>{{specie_detail.specie}}</i>
                                <br>
                                <strong>Slug : </strong><i>{{specie_detail.slug}}</i>
                                <br>
                                <strong>Basis of Record : </strong><i>{{specie_detail.basis_of_record}}</i>
                                <br>
                                <strong>Taxonomic Notes : </strong>
                                <br>
                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Animi soluta praesentium nostrum, aliquam eos voluptate eaque laboriosam aliquid sed, quas quidem voluptatem nulla quisquam odit qui aspernatur, quo blanditiis. Repellat.</p>
                                <strong>Researcher : </strong><i>{{specie_detail.created_by}}</i>
                                <br>
                                <strong>Created On: </strong>{{specie_detail.created | date:"D d M Y" }}
                                <br>
                                <strong>Last Modified : </strong><i>{{specie_detail.modified | date:"D d M Y"}}</i>
                                <hr>

                                <h3><strong>Additional Information : </strong></h3>
                                    <div class="text-justify">
                                        <div>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Labore sit eveniet placeat blanditiis, ea tenetur vero, possimus, dolorem soluta nisi dignissimos? Itaque architecto, ea velit in repellendus, voluptatum maxime ipsa!</div><br>
                                        <div>Veritatis sequi optio perferendis distinctio vero illo animi quae saepe aperiam, perspiciatis repudiandae fugit molestias voluptatibus, esse velit, eveniet. Eaque deserunt architecto ullam vero nemo vitae maxime laudantium officia fugiat!</div><br>
                                        <div>Quas iusto quasi quam molestiae nihil asperiores necessitatibus nostrum commodi minima neque, dignissimos facere pariatur rem ducimus laudantium ex beatae esse porro distinctio laborum, atque impedit veniam enim. Numquam, molestias.</div><br>
                                        <div>Omnis, voluptatem, delectus cupiditate unde quos blanditiis eos iusto, alias labore eius fugiat, quia ut fuga. Nam beatae labore, reiciendis quod ad doloribus error qui unde, dignissimos modi tempore eaque.</div>
                                        <div>Sapiente odit temporibus dolore vitae ex, delectus voluptates, a natus inventore voluptas nihil aperiam at amet atque vero, molestias quas architecto eligendi laudantium, veritatis iusto fuga eveniet! Incidunt, velit reprehenderit.</div><br>
                                    </div>

                                <hr>
                                <button type="button" class="btn btn-info">Export as File</button>
                                <button type="button" class="btn btn-info">Email</button>
                                   
                            </div>
                            <hr>
                        </div>
                    </div>

                    <div class="row">

                    </div>
                </div>

            </div>
        </div>

    </div>
</div>
<div id="sec3">
    <div class="container">
        <div class="row">
            <div id="map-outer" class="col-md-12">
                <div id="address" class="col-md-4">

                </div>
                <div id="map-container" class="col-md-8"></div>
            </div>
        </div>
    </div>
</div>
{% endblock container %} 
{% block scripts %}
<script src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script>

    $(document).ready(function(e) {
        //https://stackoverflow.com/questions/5448545/how-to-retrieve-get-parameters-from-javascript
        function getSearchParameters() {
              var prmstr = window.location.search.substr(1);
              return prmstr != null && prmstr != "" ? transformToAssocArray(prmstr) : {};
        }

        function transformToAssocArray( prmstr ) {
            var params = {};
            var prmarr = prmstr.split("&");
            for ( var i = 0; i < prmarr.length; i++) {
                var tmparr = prmarr[i].split("=");
                params[tmparr[0]] = tmparr[1];
            }
            return params;
        }     

        var params = getSearchParameters();
        var s = decodeURIComponent(params.q);
       
        if(s=='undefined' || s=="") s='All';
        $('nav#cats > ul > li:contains('+s+')')
            .addClass('active')
            .siblings()
            .removeClass('active');

        $('.search-panel .dropdown-menu').find('a').click(function(e) {
            e.preventDefault();
            var param = $(this).attr("href").replace("#", "");
            var concept = $(this).text();
            $('.search-panel span#search_concept').text(concept);
            $('.input-group #search_param').val(param);
        });

    }); //document ready
</script>

{% endblock scripts %}